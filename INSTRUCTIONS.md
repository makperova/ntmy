# Инструкции по добавлению политики безопасности в Supabase

## Проблема
В настоящее время в таблице `cards` настроена Row Level Security (RLS), которая позволяет только владельцам карточек просматривать свои карточки. Это делает невозможным просмотр карточек по открытым URL, таким как `/card/[username]`.

## Решение: Добавление политики публичного чтения

Вам необходимо добавить новую политику безопасности, которая позволит публичный доступ на чтение карточек.

### Инструкции по добавлению через Supabase Dashboard:

1. Войдите в панель управления Supabase по адресу: https://supabase.com/dashboard
2. Выберите ваш проект (`ntmy`)
3. В левом меню перейдите к разделу **Table Editor**
4. Найдите таблицу `cards` в списке таблиц
5. Перейдите на вкладку **Policies**
6. Нажмите кнопку **New Policy**
7. Выберите шаблон **Get started quickly** и затем опцию **Enable read access to everyone**
8. В поле **Policy name** введите: `Cards are publicly readable by username`
9. Нажмите **Save Policy**

### Альтернативный метод через SQL Editor:

1. В левом меню Supabase Dashboard выберите **SQL Editor**
2. Создайте новый запрос
3. Вставьте следующий SQL-код:

```sql
-- Добавление политики публичного чтения карточек
CREATE POLICY "Cards are publicly readable by username" 
ON cards FOR SELECT 
USING (true);
```

4. Нажмите **Run** для выполнения запроса

## Проверка работы

После добавления политики безопасности, публичные страницы карточек должны работать корректно. Вы можете проверить это, попробовав открыть карточку по URL `/card/[username]`, где `[username]` - это имя пользователя существующей карточки.

## Важное замечание

Добавление этой политики безопасности не влияет на другие политики безопасности таблицы `cards`. Пользователи по-прежнему смогут создавать, обновлять и удалять только свои собственные карточки. 